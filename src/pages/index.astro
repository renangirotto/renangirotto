---
import {
  Disc3 as IconDisc3,
  Github as IconGithub,
  Linkedin as IconLinkedin,
} from "lucide-astro";

import BaseHead from "@/components/BaseHead.astro";
import ButtonTheme from "@/components/ButtonTheme.astro";
import Grid from "@/components/Grid.astro";
import GridBox from "@/components/GridBox.astro";
import Header from "@/components/Header.astro";
import { LINKS, ROUTES, SITE_DESCRIPTION } from "@/consts";

const year = new Date().getFullYear() - 2017;
---

<!doctype html>
<html lang="pt-br" class="is-theme-dark">
  <head>
    <BaseHead
      title="Hey! All good? | Renan Girotto"
      description={SITE_DESCRIPTION}
      image=""
    />
  </head>
  <body>
    <Header />
    <main>
      <Grid>
        <GridBox data-ui-grid-area="name">
          <p>
            <span class="marker">Hey, I'm Renan!</span>
            <br /> front-end developer for the past {year} years
          </p>
          <figure aria-hidden="true">
            <img
              alt="Um desenho meu segurando meus óculos, os meus olhos não estão no resto mas sim presos as lentes dos óculos."
              class="is-first-glass"
              loading="eager"
              src={`/images/avatar-glass-open.png`}
            />
            <img
              alt="Um desenho meu segurando meus óculos, os meus olhos não estão no resto mas sim presos as lentes dos óculos."
              class="is-second-glass"
              loading="eager"
              src={`/images/avatar-glass-close.png`}
            />
          </figure>
        </GridBox>

        <GridBox data-ui-grid-area="linkedin" href={LINKS.social.linkedin}>
          <IconLinkedin />
        </GridBox>

        <GridBox data-ui-grid-area="github" href={LINKS.social.github}>
          <IconGithub />
        </GridBox>

        <GridBox data-ui-grid-area="career">
          <p>
            currently working as <span class="marker">lead front-end</span>
            <br />
            <a class="marker" href={LINKS.companies.r2ventures} target="_blank"
              >@R2 Ventures</a
            >
          </p>
        </GridBox>

        <GridBox data-ui-grid-area="switch">
          <ButtonTheme />
        </GridBox>

        <GridBox data-ui-grid-area="blog">
          <p>
            writing about my dev experience here on <a
              class="marker"
              href={ROUTES.blog}>this blog</a
            >
          </p>

          <figure aria-hidden="true">
            <img
              alt="Um desenho meu deitado em uma mesa com chamas ao meu redor."
              class="is-first-table"
              src=`/images/avatar-table-one.png`
            />
            <img
              alt="Um desenho meu deitado em uma mesa com chamas ao meu redor."
              class="is-second-table"
              src=`/images/avatar-table-two.png`
            />
          </figure>
        </GridBox>

        <GridBox href={LINKS.social.qobuz} data-ui-grid-area="qobuz">
          <IconDisc3 />
        </GridBox>
      </Grid>
    </main>
  </body>
</html>

<style>
  body {
    figure {
      overflow: hidden;
    }

    [data-ui-grid-area="career"] {
      --_animation-delay-career: 0.8s;
      --_marker-font-size: 2.5rem;
      --_text-font-size: 2.25rem;

      grid-area: career;
      display: flex;
      align-items: center;
      position: relative;
      animation-delay: var(--_animation-delay-career);

      @container main-grid (width >= 768px) {
        --_animation-delay-career: 0.8s;
        --_text-font-size: 2rem;
      }

      @container main-grid (width >= 906px) {
        --_animation-delay-career: 1.1s;
      }

      &::before {
        content: "";
        display: block;
        width: 0;
        height: 0;
        border-left: 34px solid transparent;
        border-right: 34px solid transparent;
        border-bottom: 34px solid
          light-dark(
            var(--color-light-background-100),
            var(--color-dark-selection-100)
          );
        position: absolute;
        inset: auto -23px -6px auto;
        transform: rotate(135deg);
        z-index: 1;
      }

      &::after {
        content: "";
        display: block;
        width: 44px;
        height: 44px;
        position: absolute;
        inset: auto 0 0 auto;
        z-index: 0;
        border-start-start-radius: 16px;
        background: light-dark(
          var(--color-light-comment-100),
          var(--color-dark-comment-100)
        );
      }
    }

    [data-ui-grid-area="blog"] {
      --_animation-delay-blog: 1.1s;
      --_marker-font-size: 2.8rem;
      --_text-font-size: 2.5rem;

      grid-area: blog;
      position: relative;
      text-align: right;
      animation-delay: var(--_animation-delay-blog);

      @container main-grid (width >= 768px) {
        --_animation-delay-blog: 0.9s;
        --_text-font-size: 2rem;
      }

      @container main-grid (width >= 906px) {
        --_animation-delay-blog: 0.6s;
      }

      &::before {
        content: "";
        display: block;
        width: 0;
        height: 0;
        border-left: 34px solid transparent;
        border-right: 34px solid transparent;
        border-bottom: 34px solid
          light-dark(
            var(--color-light-background-100),
            var(--color-dark-selection-100)
          );
        position: absolute;
        inset: -6px auto auto -23px;
        transform: rotate(315deg);
        z-index: 1;
      }

      &::after {
        content: "";
        display: block;
        width: 47px;
        height: 47px;
        position: absolute;
        inset: 0 auto auto 0;
        z-index: 0;
        border-end-end-radius: 16px;
        background: light-dark(
          var(--color-light-comment-100),
          var(--color-dark-comment-100)
        );
      }

      figure {
        width: calc(
          100% + 64px + 16px
        ); /* padding-inline from container + extra space to overflow the container */
        height: 240px;
        position: relative;
        margin-block-start: 32px;
        margin-inline: auto;
        inset-inline-start: -40px;

        @container main-grid (width >= 768px) {
          width: 354px;
          height: 230px;
          position: absolute;
          inset: auto 16px 8px auto;
          margin-block-start: 0px;
          margin-inline: 0px;
        }

        @container main-grid (width >= 906px) {
          inset: auto -14px 12px auto;
        }

        img {
          width: 100%;
          position: absolute;
          inset: 0;
          animation-iteration-count: infinite;
          animation-timing-function: linear;

          &.is-first-table {
            animation-name: animate-image-table-one;
            animation-duration: 2s;
          }

          &.is-second-table {
            animation-name: animate-image-table-two;
            animation-duration: 2s;
          }
        }
      }

      p {
        max-width: 250px;
        margin-inline-start: auto;

        @container main-grid (width >= 906px) {
          max-width: none;
        }
      }
    }

    [data-ui-grid-area="qobuz"] {
      --_animation-delay-qobuz: 1s;

      grid-area: qobuz;
      animation-delay: var(--_animation-delay-qobuz);

      @container main-grid (width >= 768px) {
        --_animation-delay-qobuz: 1s;
      }

      @container main-grid (width >= 906px) {
        --_animation-delay-qobuz: 0.9s;
      }
    }

    [data-ui-grid-area="github"] {
      --_animation-delay-github: 0.6s;

      grid-area: github;
      animation-delay: var(--_animation-delay-github);

      @container main-grid (width >= 768px) {
        --_animation-delay-github: 0.6s;
      }

      @container main-grid (width >= 906px) {
        --_animation-delay-github: 0.8s;
      }
    }

    [data-ui-grid-area="linkedin"] {
      --_animation-delay-linkedin: 0.7s;

      grid-area: linkedin;
      animation-delay: var(--_animation-delay-linkedin);

      @container main-grid (width >= 768px) {
        --_animation-delay-linkedin: 0.7s;
      }

      @container main-grid (width >= 906px) {
        --_animation-delay-linkedin: 0.7s;
      }
    }

    [data-ui-grid-area="name"] {
      --_animation-delay-name: 0.5s;
      --_marker-font-size: 3rem;
      --_text-font-size: 2.25rem;

      grid-area: name;
      display: flex;
      flex-direction: column;
      align-items: center;
      animation-delay: var(--_animation-delay-name);

      @container main-grid (width >= 768px) {
        --_animation-delay-name: 0.5s;
        --_text-font-size: 2.1rem;
      }

      @container main-grid (width >= 906px) {
        --_animation-delay-name: 0.5s;
        flex-direction: row;
      }

      p {
        max-width: 260px;
        text-align: center;

        @container main-grid (width >= 906px) {
          max-width: calc(100% - 16px - 220px);
          text-align: left;
        }
      }

      figure {
        width: 273px;
        height: 298px;
        position: relative;
        inset-block-end: -24px;

        @container main-grid (width >= 906px) {
          width: 243px;
          height: 268px;
          position: absolute;
          inset: auto 24px 0 auto;
          margin-inline: 0;
        }

        img {
          height: 100%;
          position: absolute;
          inset: 0;
          animation-iteration-count: infinite;
          animation-timing-function: linear;

          &.is-second-glass {
            animation-name: animate-image-glass-two;
            animation-duration: 7s;
          }
        }
      }
    }

    [data-ui-grid-area="switch"] {
      --_box-padding-block: 0;
      --_box-padding-inline: 0;
      --_animation-delay-switch: 0.9s;

      grid-area: switch;
      display: flex;
      justify-content: center;
      align-items: center;
      animation-delay: var(--_animation-delay-switch);

      @container main-grid (width >= 768px) {
        --_animation-delay-switch: 1.1s;
      }

      @container main-grid (width >= 906px) {
        --_animation-delay-switch: 1s;
      }

      button {
        width: 100%;
        height: 100%;
        background: transparent;
      }

      svg {
        width: 56px;
        height: 56px;
      }
    }
  }

  @keyframes animate-image-table-one {
    0%,
    50% {
      opacity: 1;
      visibility: visible;
    }
    50.01%,
    100% {
      opacity: 0;
      visibility: hidden;
    }
  }

  @keyframes animate-image-table-two {
    0%,
    50% {
      opacity: 0;
      visibility: hidden;
    }
    50.01%,
    100% {
      opacity: 1;
      visibility: visible;
    }
  }

  @keyframes animate-image-glass-two {
    0% {
      opacity: 0;
      visibility: hidden;
    }
    24% {
      opacity: 0;
      visibility: hidden;
    }
    25% {
      opacity: 1;
      visibility: visible;
    }
    29% {
      opacity: 1;
      visibility: visible;
    }
    30% {
      opacity: 0;
      visibility: hidden;
    }
    49% {
      opacity: 0;
      visibility: hidden;
    }
    50% {
      opacity: 1;
      visibility: visible;
    }
    54% {
      opacity: 1;
      visibility: visible;
    }
    55% {
      opacity: 0;
      visibility: hidden;
    }
    59% {
      opacity: 0;
      visibility: hidden;
    }
    60% {
      opacity: 1;
      visibility: visible;
    }
    64% {
      opacity: 1;
      visibility: visible;
    }
    65% {
      opacity: 0;
      visibility: hidden;
    }
    84% {
      opacity: 0;
      visibility: hidden;
    }
    85% {
      opacity: 1;
      visibility: visible;
    }
    89% {
      opacity: 1;
      visibility: visible;
    }
    90% {
      opacity: 0;
      visibility: hidden;
    }
    100% {
      opacity: 0;
      visibility: hidden;
    }
  }
</style>
